<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <style type="text/css">
            html, body {
                height: 100%;
                width: 100%;
            }
            * {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }
            h2 {
                font-family: comic sans ms;
                font-size: 1em;
            }
        </style>
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <script type="text/javascript">
            window.addEventListener('message', function(e){
                let data;
                try {
                    data = JSON.parse(e.data);
                } catch(err){
                    console.error(err);
                    return;
                }
                switch(data.type){
                    case 'resize':
                        __RESIZE(data, e.source);
                        break;
                }
            });
            function __RESIZE(data, win){
                var iframes = document.querySelectorAll('iframe');
                var len = iframes.length;
                var iframe = null;
                while(len--){
                    if(iframes[len].contentWindow === win){
                        iframe = iframes[len];
                        break;
                    }
                }
                if(iframe === null){
                    return console.error("Cannot find iframe", win);
                }
                iframe.setAttribute('height', data.height);
                // We current keep the frame at 100%
                // iframe.setAttribute('width', data.width);
            }
        </script>
        {{# data.title }}
            <h1>{{ data.title }}</h1>
        {{/ data.title }}
        {{# data.components }}
            <h2><a href="/{{ escaped_data }}/{{ escaped_theme }}">{{ name }} - {{ data }} - {{ theme }}</a></h2>
            <iframe src="/{{ escaped_data }}/{{ escaped_theme }}" frameborder="0" marginheight="0" marginwidth="0" width="100%"></iframe>
            <hr />
        {{/ data.components }}
    </body>
</html>