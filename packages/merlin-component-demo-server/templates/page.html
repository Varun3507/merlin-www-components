<!DOCTYPE html>
<html>
    <head>
        <title></title>
        <style type="text/css">
            html, body {
                height: 100%;
                width: 100%;
            }
            * {
                box-sizing: border-box;
                margin: 0;
                padding: 0;
            }
            h2 {
                font-family: monospace;
                font-size: 1em;
            }
            .group {
                margin: 1em 0;
                padding: 15px 10px;
            }
            .group + .group {
                border-top: 1px dotted #333;
            }
            .group__title {
                font-family: monospace;
                margin: 0 0 1em 0;
            }
        </style>
        <meta name="viewport" content="width=device-width, initial-scale=1">
    </head>
    <body>
        <script type="text/javascript">
            window.addEventListener('message', function(e){
                let data;
                try {
                    data = JSON.parse(e.data);
                } catch(err){
                    console.error(err);
                    return;
                }
                switch(data.type){
                    case 'resize':
                        __RESIZE(data, e.source);
                        break;
                }
            });
            function __RESIZE(data, win){
                var iframes = document.querySelectorAll('iframe');
                var len = iframes.length;
                var iframe = null;
                while(len--){
                    if(iframes[len].contentWindow === win){
                        iframe = iframes[len];
                        break;
                    }
                }
                if(iframe === null){
                    return console.error("Cannot find iframe", win);
                }
                iframe.setAttribute('height', data.height);
                // We current keep the frame at 100%
                // iframe.setAttribute('width', data.width);
            }
        </script>

        {{# data.title }}
            <h1>{{ data.title }}</h1>
        {{/ data.title }}

        {{# data.groups }}
            <h3>{{ name }}</h3>

            {{# demos }}
                <div class="group">
                    <h2 class="group__title"><a href="{{ url }}">{{ title }}</a></h2>
                    <iframe src="{{ url }}" frameborder="0" marginheight="0" marginwidth="0" width="100%"></iframe>
                </div>
            {{/ demos }}
        {{/ data.groups }}

    </body>
</html>